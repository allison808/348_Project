{% extends "base.html" %}
{% block title %}{{ "Edit Review" if review else "Make a Review" }}{% endblock %}

{% block content %}
<h1 align="center">{{ "Edit Review" if review else "Make a Review" }}</h1>

<form method="POST">
    {{ form.hidden_tag() }}

    <label for="restaurant_id">Restaurant:</label>
    <select name="restaurant_id" id="restaurant_id" class="form-control" required>
        <option value="" disabled selected>Select a restaurant</option>
        {% for restaurant in restaurants %}
            <option value="{{ restaurant.id }}"
                {% if review and review.restaurant_id == restaurant.id %}selected{% endif %}>
                {{ restaurant.name }}
            </option>
        {% endfor %}
    </select>
    <br />

    <label for="rating">Rating:</label>
    <select name="rating" id="rating" class="form-control" required>
        <option value="1" {% if review and review.rating == 1 %}selected{% endif %}>1 - Poor</option>
        <option value="2" {% if review and review.rating == 2 %}selected{% endif %}>2 - Fair</option>
        <option value="3" {% if review and review.rating == 3 %}selected{% endif %}>3 - Good</option>
        <option value="4" {% if review and review.rating == 4 %}selected{% endif %}>4 - Very Good</option>
        <option value="5" {% if review and review.rating == 5 %}selected{% endif %}>5 - Excellent</option>
    </select>
    <br />

    <label for="text">Review:</label>
    <textarea name="text" id="text" class="form-control" placeholder="{{ 'Write your review here...' if not review else 'Update your review...' }}" required>{{ review.text if review else '' }}</textarea>
    <br />
    
    <div align="center">
        <button type="submit" class="btn btn-lg btn-primary">{{ "Update Review" if review else "Post" }}</button>
    </div>
</form>

<br />

<div align="center">
    <a href="/home">
        <button type="button" class="btn btn-lg btn-secondary">Back</button>
    </a>
</div>
{% endblock %}